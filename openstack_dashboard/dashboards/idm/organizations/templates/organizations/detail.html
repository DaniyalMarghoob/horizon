{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans "Organizations" %}{% endblock %}

{% block page_header %}{% endblock page_header %}

{% block main %}
<div id="detailOrganization">
  <header>
    <h3 class="name">
      {{ organization_name }}
      {% if edit %}
      <a href="{% url 'horizon:idm:organizations:edit' organization_id %}" class="small"><i class="fa fa-edit"></i>edit</a>
      {% endif %}
    </h3>
    <!--crear la carga de la imagen -->
    <div class="logo">
      <img alt="organization logo" src="{{ image }}">        

    </div>
  </header>
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="description">
        <h5>
          Description
        </h5>

        <div class="info expander">
          <p>{{ contact_info }}</p>
        </div>
      </div> 
      <div class="contac_us">
        <h5>
          Contact us
        </h5>
        <div>
          <p>{{ city }}</p>
          <p>{{ email }}</p>
          <p>{{ website }}</p>
        </div>
      </div>
    </div>
  </div>

  <div class="panel panel-default members">

    <div class="panel-heading">
      <span>
        {{ members_table }}  
      </span>
      {{ members_table.render_table_actions }}
    </div>
    <div class="panel-body">
      {% if members_table.get_rows %}
        {{ members_table.render}}
      {% else %}
        <p class="alert alert-info empty"> {{ organization_name }} does not have any members.</p>
      {% endif %}
    </div>
    {% if members_table.indexes|length > 1 %}
      <div class="panel-footer">
        <nav>
          <ul class="pagination">
            <li>
              <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
            {% for index in members_table.indexes reversed %}
              <li>
                <a href="?index_mem={{index}}&index_app={{index_app}}"><span>{{ forloop.revcounter }}</span></a>
              </li>
            {% endfor %}
            <li>
              <a href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    {% endif %}
  </div>

  <div class="panel panel-default applications">
    <div class="panel-heading">
      <span>
        {{ applications_table }}
      </span>
      {{ applications_table.render_table_actions }}
    </div>
    <div class="panel-body">
      {% if applications_table.get_rows %}
        {{ applications_table.render}}
      {% else %}
        <p class="alert alert-info empty"> {{organization_name}} does not have any authorizing applications.</p>
      {% endif %}
    </div>
    {% if applications_table.indexes|length > 1 %}
      <div class="panel-footer">
        <nav>
          <ul class="pagination">
            <li>
              <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
            {% for index in applications_table.indexes reversed %}
              <li>
                 <a href="?index_mem={{index_mem}}&index_app={{index}}"><span>{{ forloop.revcounter }}</span></a>
              </li>
            {% endfor %}
            <li>
              <a href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      {% endif %}
  </div>

</div>
{% endblock %}
