{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans "Organizations" %}{% endblock %}

{% block page_header %}{% endblock page_header %}

{% block main %}
<div id="detailOrganization">
  <header>
    <h3 class="name">
      {{ organization.name }}
      {% if edit %}
      <a href="{% url 'horizon:idm:organizations:edit' organization_id %}" class="small"><i class="fa fa-edit"></i><span>edit</span></a>
      {% endif %}
      {%if member%}
      <a href="{% url 'horizon:idm:organizations:remove' organization_id %}" data-toggle="modal" data-target="#myModal" class="small ajax-modal"><i class="fa fa-sign-out"></i><span>exit</span></a>
      {%endif%}
    </h3>

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Exit of this organization</h4>
          </div>
          <div class="modal-body">
            <span>Are you sure?</span>
            <button type="button" class="btn btn-danger pull-right">Exit</button>
          </div>
        </div>
      </div>
    </div>
    <!--crear la carga de la imagen -->
    <div class="logo">
      <img alt="organization logo" src="{{ image }}">
    </div>
  </header>
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="description">
        <h5>
          Description
        </h5>
        <div class="info expander">
          <p>{{ organization.description }}</p>
        </div>
      </div> 
      <div class="contac_us">
        <h5>
          Website
        </h5>
        <div>
          <p>{{ organization.website }}</p>
        </div>
      </div>
    </div>
  </div>

  <div class="panel panel-default members" id="{{members_table.slugify_name}}">

    <div class="panel-heading">
      <span>
        {{ members_table }}  
      </span>
      {{ members_table.render_table_actions }}
    </div>
    <div class="panel-body">
      {% if members_table.get_rows %}
      {{ members_table.render}}
      {% else %}
      <p class="alert alert-info empty"> {{ organization_name }} does not have any members.</p>
      {% endif %}
    </div>
    {% if members_table.indexes and members_table.indexes|length > 1  %}
      <div class="panel-footer">

        <nav>
          <ul class="pagination">
          <li {%if members_table.index_act = members_table.index_first %}class="active"{%endif%}>
                <a href="?index={{members_table.index_first}}#{{members_table.slugify_name}}"><span aria-hidden="true">First</span></a>
            </li>
            <!--<li>
              <a href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>-->
            {% for index, num in members_table.indexes %}
              <li {%if members_table.index_act = index %}class="active"{%endif%}>
                <a href="?index_mem={{index}}&index_app={{index_app}}#{{members_table.slugify_name}}">{{ num }}</a>
              </li>
            {% endfor %}
            <li {%if members_table.index_act = members_table.index_last %}class="active"{%endif%}>
                <a href="?index={{members_table.index_last}}#{{members_table.slugify_name}}"><span aria-hidden="true">Last</span></a>
            </li>
            <!--<li>
              <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>-->
          </ul>
        </nav>
      </div>
    {% endif %}
  </div>

  <div class="panel panel-default applications" id="{{applications_table.slugify_name}}">
    <div class="panel-heading">
      <span>
        {{ applications_table }}
      </span>
      {{ applications_table.render_table_actions }}
    </div>
    <div class="panel-body">
      {% if applications_table.get_rows %}
      {{ applications_table.render}}
      {% else %}
      <p class="alert alert-info empty"> {{organization_name}} does not have any authorizing applications.</p>
      {% endif %}
    </div>
    {% if applications_table.indexes|length > 1 and applications_table.indexes %}
    <div class="panel-footer">
      <nav>
        <ul class="pagination">
        <li {%if applications_table.index_act = applications_table.index_first %}class="active"{%endif%}>
              <a href="?index={{applications_table.index_first}}#{{applications_table.slugify_name}}"><span aria-hidden="true">First</span></a>
          </li>
          <!--<li>
            <a href="#" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>-->
          {% for index, num in applications_table.indexes %}
          <li {%if applications_table.index_act = index %}class="active"{%endif%}>
            <a href="?index_mem={{index_mem}}&index_app={{index}}#{{applications_table.slugify_name}}">{{ num }}</a>
          </li>
          {% endfor %}
          <li {%if applications_table.index_act = applications_table.index_last %}class="active"{%endif%}>
              <a href="?index={{applications_table.index_last}}#{{applications_table.slugify_name}}"><span aria-hidden="true">Last</span></a>
          </li>
                    <!--<li>
            <a href="#" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>-->
        </ul>
      </nav>
    </div>
    {% endif %}
  </div>
  {% if member %}
  <div class="panel panel-default">
    <div class="panel-body">
      <a class="btn btn-default btn-sm ajax-modal" href="{% url 'horizon:idm:organizations:remove' organization_id %}">Remove from org</a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
