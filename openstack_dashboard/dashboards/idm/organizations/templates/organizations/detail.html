{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans "Organizations" %}{% endblock %}

{% block page_header %}{% endblock page_header %}

{% block main %}
<div id="detailOrganization">
  <header>
    <h3 class="name">
      {{ organization.name }}
      {% if edit %}
      <a href="{% url 'horizon:idm:organizations:edit' organization_id %}" class="small"><i class="fa fa-edit"></i><span>edit</span></a>
      {% endif %}
      {%if member%}
      <a href="{% url 'horizon:idm:organizations:remove' organization_id %}" data-target="#myModal" class="small ajax-modal"><i class="fa fa-sign-out"></i><span>exit</span></a>
      {%endif%}
    </h3>

    <div class="logo">
      <img alt="organization logo" src="{{ image }}">
    </div>
  </header>
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="description">
        <h5>
          Description
        </h5>
        <div class="info expander">
          {% if organization.description %}
          <p>{{ organization.description }}</p>
          {% else %}
          <p><i>No description available</i></p>
          {% endif %}
        </div>
      </div> 
      {% if organization.website %}
      <div class="contact_us">
        <h5>
          Website
        </h5>
        <div>
          <p>{{ organization.website }}</p>
        </div>
      </div>
      {% endif %}
    </div>
  </div>

  <div class="panel panel-default members" id="{{members_table.slugify_name}}" data-pagination-url="{% url 'fiware_complex_server_filters_users' %}" data-organization-id="{{ organization.id }}" data-pagination-pages="{{ members_table.pages }}">

    <div class="panel-heading">
      <span>
        {{ members_table }}  
      </span>
      {{ members_table.render_table_actions }}
    </div>
    <div class="panel-body">
      {% if members_table.get_rows %}
      {{ members_table.render}}
      {% else %}
      <p class="alert alert-info empty"> {{ organization_name }} does not have any members.</p>
      {% endif %}
    </div>
    <div class="panel-footer">
      <nav id="{{members_table.slugify_name}}_pagination_container">
      </nav>
    </div>
  </div>

  <div class="panel panel-default applications" id="{{applications_table.slugify_name}}"  data-pagination-url="{% url 'fiware_complex_server_filters_applications' %}" data-organization-id="{{ organization.id }}" data-pagination-pages="{{ applications_table.pages }}">
    <div class="panel-heading">
      <span>
        {{ applications_table }}
      </span>
      {{ applications_table.render_table_actions }}
    </div>
    <div class="panel-body">
      {% if applications_table.get_rows %}
      {{ applications_table.render}}
      {% else %}
      <p class="alert alert-info empty"> {{organization_name}} does not have any authorizing applications.</p>
      {% endif %}
    </div>
    <div class="panel-footer">
      <nav id="{{applications_table.slugify_name}}_pagination_container">
      </nav>
    </div>
  </div>
</div>
{% endblock %}
